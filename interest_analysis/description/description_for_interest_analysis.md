============================================================
📌 pAiring 서비스 내 상대방 호감도 분석 기능 설명
============================================================

1. 📌 본인 역할
------------------------------------------------------------

- 담당 역할: pAiring 서비스의 "대화 추천" 기능 중 **상대방의 호감도 분석** 파트를 담당함.
          
          "대화 추천" 기능은 세 가지 단계로 이루어짐
              : 대화 요약 -> 상대방의 호감도 분석-> "대화 요약 내용"과 "상대방의 호감도 분석" 결과를 토대로 상대방에게 보내면 좋을 대화 추천

- 주요 임무: 사용자의 채팅 로그를 분석하여 대화 상대방의 감정과 관심도를 평가하고, 
             이를 기반으로 후속 대화 추천 기능에 활용할 데이터를 제공함.

2. 📌 상대방 호감도 분석 로직 개요
------------------------------------------------------------

- 데이터 수집
  • 사용자가 버튼을 누르면, MongoDB에서 해당 채팅 로그를 조회하거나, 
    테스트를 위해 더미 데이터를 불러옴.
- 데이터 전처리
  • 채팅 로그를 “나”와 “상대방”의 메시지로 구분하고, 하나의 통합 문자열로 재구성함.
- 모델 추론
  • 사전에 정의된 프롬프트(시스템 프롬프트, 사용자 프롬프트)와 함께 
    OpenAI의 LLM을 호출하여, 상대방의 호감도를 "호감 있음" 또는 "호감 없음"으로 평가함.
  • 결과는 5줄 이내의 이유 요약과 함께 제공됨.
- 결과 반환
  • 분석 결과(호감도 및 요약 이유)를 JSON 형태로 API 응답을 통해 사용자에게 전달함.

3. 📌 기능 흐름 텍스트 다이어그램
------------------------------------------------------------

[사용자 버튼 클릭]
         │
         ▼
[API 엔드포인트 호출]
         │
         ▼
[데이터 수집]
   ┌─────────────┐
   │ DB 조회     │   또는   [더미 데이터 로드]
   └─────────────┘
         │
         ▼
[데이터 전처리: "나" vs "상대방" 구분]
         │
         ▼
[프롬프트 설정 및 LLM 호출]
         │
         ▼
[호감도 분석 결과 산출]
         │
         ▼
[API 응답 반환]

4. 📌 서비스 주요 과정 설명
------------------------------------------------------------

- 데이터 수집 및 전처리
  • 사용자의 요청에 따라 DB에서 또는 더미 데이터를 통해 채팅 로그를 수집함.
  • 수집된 로그는 "나"의 메시지와 "상대방"의 메시지로 구분되어 
    하나의 통합된 텍스트로 구성됨.

- 모델 추론 및 평가
  • 통합된 채팅 로그와 사전 정의된 프롬프트를 이용해 LLM에 분석 요청을 보냄.
  • LLM은 상대방의 태도와 발화 내용을 바탕으로 호감도를 평가하고,
    그 이유를 간략하게 요약함.

- 결과 활용
  • 최종 분석 결과는 후속 대화 추천 기능에서, 
    대화 요약 내용과 함께 상대방에게 적합한 대화 전략을 제시하는 데 활용됨.

5. 📌 사용한 기술 스택 및 사용 이유
------------------------------------------------------------

▶ FastAPI  
   • 비동기 API 개발 및 빠른 프로토타이핑을 위해 선택함.  
   • 자동 문서화(OpenAPI 스키마 생성)와 뛰어난 성능을 제공하여 유지보수 용이.

▶ Pydantic  
   • Pydantic을 활용하여 데이터 유효성 검증 및 직렬화를 간편하게 처리하여, 안정성 확보.

▶ MongoDB & PyMongo  
   • 유연한 스키마 구조 덕분에 다양한 채팅 로그 데이터를 효과적으로 저장 및 조회 가능.  
   • PyMongo를 활용하여 Python과의 원활한 연동이 가능.

▶ LangChain & OpenAI API  
   • 최신 LLM을 활용하여 자연어 분석의 정확도를 보장함.  
   • LangChain 프레임워크를 통해 복잡한 프롬프트 구성과 모델 호출을 체계적으로 관리.


